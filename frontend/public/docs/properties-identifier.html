<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOCiD™ Metadata Schema - Property 1: Identifier</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="doc-wrapper">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>DOCiD™ Schema</h2>
                <div class="version-info">Version 1.0</div>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Documentation</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">Introduction</a>
                        </li>
                        <li class="nav-item">
                            <a href="architecture.html" class="nav-link">System Architecture</a>
                        </li>
                        <li class="nav-item">
                            <a href="metadata-schema.html" class="nav-link">Metadata Properties</a>
                            <ul class="nav-sublist">
                                <li class="nav-item">
                                    <a href="metadata-schema.html#core-properties" class="nav-link">Core Properties (1-8)</a>
                                </li>
                                <li class="nav-item">
                                    <a href="metadata-schema.html#publication-model" class="nav-link">Publication Model</a>
                                </li>
                                <li class="nav-item">
                                    <a href="metadata-schema.html#creator-model" class="nav-link">Creator Management</a>
                                </li>
                                <li class="nav-item">
                                    <a href="metadata-schema.html#controlled-vocabularies" class="nav-link">Controlled Vocabularies</a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a href="api-reference.html" class="nav-link">API Reference</a>
                            <ul class="nav-sublist">
                                <li class="nav-item">
                                    <a href="api-reference.html#authentication-endpoints" class="nav-link">Authentication</a>
                                </li>
                                <li class="nav-item">
                                    <a href="api-reference.html#publication-endpoints" class="nav-link">Publications</a>
                                </li>
                                <li class="nav-item">
                                    <a href="api-reference.html#comments-endpoints" class="nav-link">Comments System</a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a href="external-services.html" class="nav-link">External Services</a>
                            <ul class="nav-sublist">
                                <li class="nav-item">
                                    <a href="external-services.html#cordra-integration" class="nav-link">CORDRA</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#crossref-integration" class="nav-link">Crossref</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#apa-handle-integration" class="nav-link">APA Handle ID</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#datacite-integration" class="nav-link">Datacite</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#cstr-integration" class="nav-link">CSTR</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#ror-integration" class="nav-link">ROR</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#orcid-integration" class="nav-link">ORCID</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#ark-keys-integration" class="nav-link">ARK Keys</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#local-contexts-integration" class="nav-link">Local Contexts</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#arxiv-integration" class="nav-link">ArXiv ID</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#handle-id-integration" class="nav-link">Handle iD</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#hand-id-integration" class="nav-link">Hand iD</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#dpid-integration" class="nav-link">dPID</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#isni-integration" class="nav-link">ISNI</a>
                                </li>
                                <li class="nav-item">
                                    <a href="external-services.html#ringgold-integration" class="nav-link">Ringgold</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">Properties</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="properties-identifier.html" class="nav-link active">1. Identifier</a>
                        </li>
                        <li class="nav-item">
                            <a href="properties-creator.html" class="nav-link">2. Creator</a>
                        </li>
                        <li class="nav-item">
                            <a href="properties-title.html" class="nav-link">3. Title</a>
                        </li>
                        <li class="nav-item">
                            <a href="properties-publisher.html" class="nav-link">4. Publisher</a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">Appendices</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="#controlled-vocabularies" class="nav-link">Controlled Vocabularies</a>
                        </li>
                        <li class="nav-item">
                            <a href="#cultural-protocols" class="nav-link">Cultural Protocols</a>
                        </li>
                        <li class="nav-item">
                            <a href="#validation-rules" class="nav-link">Validation Rules</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>

        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" onclick="toggleSidebar()">☰</button>

        <!-- Main Content -->
        <main class="main-content">
            <div class="content-wrapper">
                <header class="doc-header">
                    <h1>Property 1: Identifier</h1>
                    <div class="subtitle">Persistent identifiers for DOCiD™ publications - DOI, Handle, DOCiD, and other PIDs</div>
                </header>

                <!-- Property Overview -->
                <section id="property-overview">
                    <div class="property">
                        <div class="property-header">
                            <div class="property-title">1. Identifier</div>
                            <div class="property-meta">
                                <span class="property-badge">Required</span>
                                <span>Occurrences: 1</span>
                            </div>
                        </div>
                        <div class="property-content">
                            <p><strong>Definition:</strong> DOCiD™ generates and manages multiple persistent identifiers (PIDs) for each publication, ensuring global uniqueness and long-term accessibility.</p>

                            <h4>Primary Identifier Generation:</h4>
                            <p>DOCiD™ automatically generates a unique identifier using the format: <code>20.500.14351/[unique-hash]</code> where 20.500.14351 is the APA Handle prefix.</p>

                            <h4>Supported Identifier Types:</h4>
                            <ul>
                                <li><strong>DOCiD™:</strong> Internal identifier format (20.500.14351/xxxxx)</li>
                                <li><strong>DOI:</strong> Digital Object Identifier via Crossref/DataCite</li>
                                <li><strong>Handle:</strong> Handle System identifier via APA</li>
                                <li><strong>CSTR:</strong> China Science Technology Resource System</li>
                                <li><strong>ARK:</strong> Archival Resource Key</li>
                                <li><strong>URN:</strong> Uniform Resource Name</li>
                            </ul>

                            <h4>Database Implementation:</h4>
                            <p>The Publications model stores primary identifiers with additional identifiers tracked in related tables:</p>
                            
                            <div class="code-example">
                                <div class="code-header">Publications Model - Identifier Fields</div>
                                <div class="code-content">
                                    <pre><code>class Publications(db.Model):
    __tablename__ = 'publications'

    # Primary database identifier
    id = Column(Integer, primary_key=True, autoincrement=True)

    # DOCiD™ specific identifier (Handle format: 20.500.14351/xxxxx)
    document_docid = Column(String(255), nullable=False, unique=True)

    # DOI identifier (optional, assigned via Crossref)
    doi = Column(String(50), nullable=True)

    # CSTR identifier (optional, via CSTR service)
    cstr_identifier = Column(String(255), nullable=True)

    # Timestamps for identifier assignment
    docid_assigned_date = Column(DateTime, default=datetime.utcnow)
    doi_assigned_date = Column(DateTime, nullable=True)</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Sub-properties -->
                <section id="identifier-subproperties">
                    <h2>Sub-properties</h2>
                    
                    <div class="property">
                        <div class="property-header">
                            <div class="property-title">1.1 identifierType</div>
                            <div class="property-meta">
                                <span class="property-badge">Required</span>
                                <span>Occurrences: 1</span>
                            </div>
                        </div>
                        <div class="property-content">
                            <p><strong>Definition:</strong> The type of identifier.</p>
                            
                            <h4>Identifier Types in DOCiD™ System:</h4>
                            <ul>
                                <li><strong>APA Handle ID</strong> (Primary): Format 20.500.14351/xxxxx - Generated automatically</li>
                                <li><strong>DOI:</strong> Digital Object Identifier - Assigned via Crossref/DataCite integration</li>
                                <li><strong>CSTR:</strong> China Science and Technology Resource - For Chinese research outputs</li>
                                <li><strong>ARK:</strong> Archival Resource Key - For long-term preservation</li>
                                <li><strong>ORCID:</strong> For creator identification (0000-0000-0000-0000)</li>
                                <li><strong>ROR:</strong> For organization identification (https://ror.org/xxxxx)</li>
                                <li><strong>RAiD:</strong> For project identification (10.80368/xxxxx)</li>
                            </ul>
                            
                            <h4>Real Examples from DOCiD™ System:</h4>
                            <div class="code-example">
                                <div class="code-header">Actual Identifier Formats</div>
                                <div class="code-content">
                                    <pre><code># APA Handle ID (Primary DOCiD)
20.500.14351/b1f26969fdec417b55c6
20.500.14351/b23a80ce9b1a6ef21588

# DOI (via Crossref)
https://doi.org/10.5555/africa.2024.001

# CSTR Identifier
CSTR:16389.09.A08V-0001

# ORCID (Creator)
0000-0002-1981-4157

# ROR (Organization)
https://ror.org/00dzfmv17

# RAiD (Project)
https://app.demo.raid.org.au/raids/10.80368/b1adfb3a</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Related Models -->
                <section id="related-models">
                    <h2>Related Database Models</h2>
                    
                    <div class="property">
                        <div class="property-header">
                            <div class="property-title">Identifier Generation Workflow</div>
                            <div class="property-meta">
                                <span class="property-badge">Automatic Assignment</span>
                                <span>Step 3: Documents</span>
                            </div>
                        </div>
                        <div class="property-content">
                            <p>DOCiD™ automatically generates identifiers during the document upload step:</p>

                            <div class="code-example">
                                <div class="code-header">Identifier Generation Process</div>
                                <div class="code-content">
                                    <pre><code># Step 3: Documents - Identifier Generation
{
    "document_type": "Article",
    "title": "Traditional Medicine Knowledge Systems",
    "description": "Comprehensive study of healing practices",
    "identifier_type": "APA Handle ID",  # Default selection
    "generated_identifier": "20.500.14351/b1f26969fdec417b55c6"  # Auto-generated
}

# The system:
1. User uploads document(s)
2. Selects identifier type (default: APA Handle ID)
3. System generates unique identifier
4. Identifier is displayed immediately
5. Stored in document_docid field upon submission</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- API Examples -->
                <section id="api-examples">
                    <h2>API Implementation</h2>

                    <div class="code-example">
                        <div class="code-header">Identifier Assignment During Publication</div>
                        <div class="code-content">
                            <pre><code>POST /api/v1/publications/assign-docid
Authorization: Bearer {jwt_token}
Content-Type: application/json

{
    "publication_type_id": 1,  # Article
    "documents": [{
        "title": "Traditional Medicine Knowledge Systems",
        "description": "Comprehensive study of healing practices",
        "identifier_type": "APA Handle ID",
        "file_path": "/uploads/2024/doc001.pdf"
    }],
    "creators": [{
        "orcid_id": "0000-0002-1981-4157",
        "role_id": 3  # Researcher
    }],
    "organizations": [{
        "ror_id": "00dzfmv17",
        "country": "Kenya"
    }],
    "funders": [{
        "ror_id": "0456r8d26",
        "name": "Gates Foundation"
    }],
    "projects": [{
        "raid_id": "10.80368/b1adfb3a",
        "title": "AFRICA PID ALLIANCE DOCID"
    }]
}

# Response includes generated identifier
{
    "status": "success",
    "data": {
        "document_docid": "20.500.14351/b1f26969fdec417b55c6",
        "message": "Publication added Successfully"
    }
}</code></pre>
                        </div>
                    </div>
                    
                    <div class="code-example">
                        <div class="code-header">Identifier Resolution Endpoint</div>
                        <div class="code-content">
                            <pre><code>GET /api/v1/publications/docid/DOCID.AFRICA.2024.001
Authorization: Bearer {jwt_token}

Response:
{
    "status": "success",
    "data": {
        "id": 1,
        "document_docid": "DOCID.AFRICA.2024.001",
        "doi": "10.5555/docid.2024.001",
        "document_title": "Traditional Medicine Knowledge Systems in Southern Africa",
        "identifiers": [
            {
                "type": "DOI",
                "value": "https://doi.org/10.5555/docid.2024.001",
                "is_primary": true
            },
            {
                "type": "Handle", 
                "value": "https://hdl.handle.net/20.500.12345/12345",
                "is_primary": false
            }
        ]
    }
}</code></pre>
                        </div>
                    </div>
                </section>

                <!-- Examples -->
                <section id="examples">
                    <h2>African Research Examples</h2>
                    
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>Resource Type</th>
                                    <th>Primary Identifier</th>
                                    <th>Alternate Identifiers</th>
                                    <th>Institution</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Image</td>
                                    <td>20.500.14351/b1f26969fdec417b55c6</td>
                                    <td>APA Handle ID<br>Auto-generated</td>
                                    <td>Training Centre in Communication</td>
                                </tr>
                                <tr>
                                    <td>Article</td>
                                    <td>20.500.14351/b23a80ce9b1a6ef21588</td>
                                    <td>DOI: 10.5555/africa.2024.001<br>CSTR: Pending</td>
                                    <td>Africa PID Alliance</td>
                                </tr>
                                <tr>
                                    <td>Dataset</td>
                                    <td>20.500.14351/c45def89a2b1234567</td>
                                    <td>ARK: ark:/12345/b4567<br>DOI: Pending</td>
                                    <td>Kenya Medical Research Institute</td>
                                </tr>
                                <tr>
                                    <td>Preprint</td>
                                    <td>20.500.14351/d56ghi01b3c4567890</td>
                                    <td>arXiv: 2024.12345<br>DOI: Reserved</td>
                                    <td>African Institute of Mathematical Sciences</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Navigation -->
                <div class="page-nav">
                    <a href="external-services.html" class="nav-prev">External Services</a>
                    <a href="properties-creator.html" class="nav-next">2. Creator</a>
                </div>
            </div>

            <!-- Footer -->
            <footer class="doc-footer">
                <p><strong>DOCiD Metadata Schema Documentation v1.0</strong></p>
                <p>Property 1: Identifier • African PID Alliance</p>
                <div class="license">
                    <p>This documentation is licensed under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">Creative Commons Attribution 4.0 International (CC BY 4.0)</a></p>
                </div>
            </footer>
        </main>
    </div>

    <!-- Scroll to Top Button -->
    <button class="scroll-top" id="scrollTop" onclick="scrollToTop()">↑</button>

    <script>
        // Sidebar toggle for mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        // Scroll to top functionality
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Show/hide scroll to top button
        window.addEventListener('scroll', function() {
            const scrollTop = document.getElementById('scrollTop');
            if (window.pageYOffset > 300) {
                scrollTop.classList.add('visible');
            } else {
                scrollTop.classList.remove('visible');
            }
        });

        // Close sidebar on mobile when clicking outside
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const toggle = document.querySelector('.mobile-menu-toggle');
            
            if (window.innerWidth <= 768 && 
                !sidebar.contains(event.target) && 
                !toggle.contains(event.target) && 
                sidebar.classList.contains('open')) {
                sidebar.classList.remove('open');
            }
        });
    </script>
</body>
</html>